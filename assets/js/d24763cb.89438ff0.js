"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[48300],{82339:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>n,metadata:()=>o,toc:()=>h});var r=t(74848),s=t(28453);const n={},i="2024-12-08 Running Modular Avatar on other apps",o={id:"research/other/modular-avatar-on-other-apps",title:"2024-12-08 Running Modular Avatar on other apps",description:"- Open article in Japanese / \u8a18\u4e8b\u3092\u65e5\u672c\u8a9e\u3067\u958b\u304f",source:"@site/docs/research/other/modular-avatar-on-other-apps.md",sourceDirName:"research/other",slug:"/research/other/modular-avatar-on-other-apps",permalink:"/docs/research/other/modular-avatar-on-other-apps",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"researchSidebar",previous:{title:"2024-12-08 \u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067Modular Avatar\u3092\u52d5\u304b\u3059\u65b9\u6cd5",permalink:"/docs/research/other/modular-avatar-on-other-apps-ja"}},l={},h=[{value:"Modular Avatar V1.x is almost already compatible",id:"modular-avatar-v1x-is-almost-already-compatible",level:3},{value:"Modular Avatar sometimes has compilation errors in some releases",id:"modular-avatar-sometimes-has-compilation-errors-in-some-releases",level:3},{value:"If you use ALCOM / VCC, installing Modular Avatar will install the VRChat SDK",id:"if-you-use-alcom--vcc-installing-modular-avatar-will-install-the-vrchat-sdk",level:3},{value:"Modular Avatar depends on DLLs",id:"modular-avatar-depends-on-dlls",level:3},{value:"Modular Avatar depends on the Unity Burst package",id:"modular-avatar-depends-on-the-unity-burst-package",level:3},{value:"Connect NDMF to the build process",id:"connect-ndmf-to-the-build-process",level:3}];function d(e){const a={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.h1,{id:"2024-12-08-running-modular-avatar-on-other-apps",children:"2024-12-08 Running Modular Avatar on other apps"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.strong,{children:(0,r.jsx)(a.a,{href:"./modular-avatar-on-other-apps-ja",children:"Open article in Japanese / \u8a18\u4e8b\u3092\u65e5\u672c\u8a9e\u3067\u958b\u304f"})})}),"\n"]}),"\n",(0,r.jsx)(a.admonition,{type:"warning",children:(0,r.jsxs)(a.p,{children:["This page was mainly written in 2024-12-08. The information below may quickly become obsolete.",(0,r.jsx)("br",{})]})}),"\n",(0,r.jsx)(a.p,{children:"Hello, if you're trying to run Modular Avatar on applications other than VRChat, here's what I learned when trying myself."}),"\n",(0,r.jsx)(a.h3,{id:"modular-avatar-v1x-is-almost-already-compatible",children:"Modular Avatar V1.x is almost already compatible"}),"\n",(0,r.jsx)(a.p,{children:"Modular Avatar V1.x is almost already compatible with apps other than VRChat, but some VRChat-specific functionality will be removed."}),"\n",(0,r.jsx)(a.p,{children:"This is because most of the code specific to VRChat is already disabled in Modular Avatar if the VRChat SDK is not detected in the project."}),"\n",(0,r.jsxs)(a.p,{children:["For example, ",(0,r.jsx)(a.a,{href:"https://modular-avatar.nadena.dev/docs/reference/merge-armature",children:"MA Merge Armature"})," will run because it's generic,\nbut ",(0,r.jsx)(a.a,{href:"https://modular-avatar.nadena.dev/docs/reference/menu-item",children:"MA Menu Item"})," will not because it's too specific to VRChat."]}),"\n",(0,r.jsx)(a.p,{children:"All sections below describe the work needed to make it compatible."}),"\n",(0,r.jsx)(a.h3,{id:"modular-avatar-sometimes-has-compilation-errors-in-some-releases",children:"Modular Avatar sometimes has compilation errors in some releases"}),"\n",(0,r.jsxs)(a.p,{children:["Modular Avatar is only ",(0,r.jsx)(a.em,{children:"officially"})," supported on the VRChat platform, so in some releases, there may be compilation errors\nbecause some code paths without VRChat had been overlooked."]}),"\n",(0,r.jsxs)(a.p,{children:["Fixing this often requires adding ",(0,r.jsx)(a.code,{children:"#if MA_VRCSDK3_AVATARS"})," and ",(0,r.jsx)(a.code,{children:"#endif"})," at the right locations to make the compiler\nignore imports, field declarations, or entire code blocks that are too specific to VRChat."]}),"\n",(0,r.jsxs)(a.p,{children:["If something requires ",(0,r.jsx)(a.code,{children:"context.AvatarDescriptor"}),", you could probably assume most of the contents of the function could be removed from compilation."]}),"\n",(0,r.jsxs)(a.p,{children:["See ",(0,r.jsx)(a.a,{href:"https://github.com/bdunderscore/modular-avatar/pull/1232/files",children:"this pull request"})," as an example."]}),"\n",(0,r.jsx)(a.h3,{id:"if-you-use-alcom--vcc-installing-modular-avatar-will-install-the-vrchat-sdk",children:"If you use ALCOM / VCC, installing Modular Avatar will install the VRChat SDK"}),"\n",(0,r.jsx)(a.p,{children:"Installing Modular Avatar V1.x through VCC or ALCOM will also install the VRChat SDK in the project.\nThis is not desirable, you must not have the VRChat SDK in a non-VRChat project because the VRChat SDK contaminates the\nproject configuration and its build process (layer names, XR project settings, etc.), which will interfere with the functionnality\nof your targeted app."}),"\n",(0,r.jsxs)(a.p,{children:["If you use ",(0,r.jsx)(a.a,{href:"https://vrc-get.anatawa12.com/alcom/",children:"ALCOM"})," package manager, you can:"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Close the Unity project,"}),"\n",(0,r.jsx)(a.li,{children:"Install Modular Avatar,"}),"\n",(0,r.jsx)(a.li,{children:"Uninstall the VRChat SDK Avatars package,"}),"\n",(0,r.jsx)(a.li,{children:"Uninstall the VRChat SDK Base package."}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"If you use VCC, you can't uninstall the VRChat SDK package once it is installed. Either switch to ALCOM, even if it's just for\nnon-VRChat projects, or install Modular Avatar manually through the source. You will also need to install NDMF."}),"\n",(0,r.jsx)(a.p,{children:"If you use neither ALCOM nor VCC, you can install it directly through the source. You will also need to install NDMF."}),"\n",(0,r.jsx)(a.p,{children:"I've been told that in the future, Modular Avatar V2.x will no longer cause the VRChat SDK to be installed in the project when it is installed."}),"\n",(0,r.jsx)(a.h3,{id:"modular-avatar-depends-on-dlls",children:"Modular Avatar depends on DLLs"}),"\n",(0,r.jsx)(a.p,{children:"Modular Avatar requires some DLLs to be present in the project, which are shipped by default in the VRChat SDK."}),"\n",(0,r.jsx)(a.p,{children:"These DLLs are often absent from other projects like ChilloutVR or Basis."}),"\n",(0,r.jsxs)(a.p,{children:["Try to install ",(0,r.jsx)(a.a,{href:"https://docs.hai-vr.dev/docs/products/chillaxins",children:"Chillaxins"})," through ALCOM, or install those DLLs yourself\nfrom Microsoft NuGet (",(0,r.jsx)(a.a,{href:"https://www.nuget.org/packages/System.Collections.Immutable/",children:"System.Collections.Immutable"}),", ",(0,r.jsx)(a.a,{href:"https://www.nuget.org/packages/Lib.Harmony/",children:"Lib.Harmony"}),")."]}),"\n",(0,r.jsx)(a.p,{children:"The DLLs are:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"System.Collections.Immutable DLL, because NDMF uses it."}),"\n",(0,r.jsx)(a.li,{children:"Lib.Harmony DLL, because NDMF 1.5 uses it."}),"\n"]}),"\n",(0,r.jsx)(a.h3,{id:"modular-avatar-depends-on-the-unity-burst-package",children:"Modular Avatar depends on the Unity Burst package"}),"\n",(0,r.jsx)(a.p,{children:"Modular Avatar requires the Unity Burst package in the project, which is normally included automatically by the VRChat SDK."}),"\n",(0,r.jsxs)(a.p,{children:["Try to install ",(0,r.jsx)(a.a,{href:"https://docs.hai-vr.dev/docs/products/chillaxins",children:"Chillaxins"})," through ALCOM, or go to Unity's package manager,\nand add Burst to your project."]}),"\n",(0,r.jsx)(a.h3,{id:"connect-ndmf-to-the-build-process",children:"Connect NDMF to the build process"}),"\n",(0,r.jsx)(a.p,{children:"To ensure Modular Avatar runs when the avatar is being built, you need to connect NDMF to the build process."}),"\n",(0,r.jsxs)(a.p,{children:["In the ChilloutVR application, I've done it in ",(0,r.jsx)(a.a,{href:"https://docs.hai-vr.dev/docs/products/chillaxins",children:"Chillaxins"})," (install it through ALCOM),\nsee ",(0,r.jsx)(a.a,{href:"https://github.com/hai-vr/chillaxins/blob/main/Packages/dev.hai-vr.chillaxins/Scripts/Editor/ChillaxinsPreBuildAvatar.cs#L51",children:"this code"}),"."]}),"\n",(0,r.jsxs)(a.p,{children:["In the Basis framework, see ",(0,r.jsx)(a.a,{href:"https://github.com/dooly123/Basis/blob/main/Packages/HVRBasisNDMF/Scripts/Editor/BasisNDMFBuildHook.cs#L13",children:"this code"}),".\nThis is already included in the Basis source code itself."]})]})}function c(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);