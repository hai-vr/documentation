"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3757],{83863:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var t=i(74848),s=i(28453);const o={unlisted:!0},r="Myrddin",l={id:"products/myrddin/index",title:"Myrddin",description:"Welcome to the Myrddin page.",source:"@site/docs/products/myrddin/index.md",sourceDirName:"products/myrddin",slug:"/products/myrddin/",permalink:"/docs/products/myrddin/",draft:!1,unlisted:!0,tags:[],version:"current",frontMatter:{unlisted:!0},sidebar:"tutorialSidebar"},d={},a=[{value:"Discord",id:"discord",level:2},{value:"How to use",id:"how-to-use",level:2},{value:"Killswitch",id:"killswitch",level:3},{value:"ClientSim VR",id:"clientsim-vr",level:3},{value:"Adaptations",id:"adaptations",level:2},{value:"Use <code>#if !COMPILER_UDONSHARP</code> to execute non-UdonSharp code",id:"use-if-compiler_udonsharp-to-execute-non-udonsharp-code",level:3},{value:"OnEnable and Awake don&#39;t execute the same way",id:"onenable-and-awake-dont-execute-the-same-way",level:3},{value:"VRCPlayerApi.UseAttachedStation() needs to be replaced",id:"vrcplayerapiuseattachedstation-needs-to-be-replaced",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"myrddin",children:"Myrddin"}),"\n",(0,t.jsxs)(n.p,{children:["Welcome to the ",(0,t.jsx)(n.em,{children:"Myrddin"})," page."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"Myrddin"})," is an experimental project that aims to bring you a little bit closer to standalone VR game development by letting you\ncompletely ",(0,t.jsx)(n.strong,{children:"ditch Udon using a killswitch"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["By suspending Udon, your UdonSharp behaviours become regular Unity behaviours. You can then use the usual debugging techniques on those\nbehaviours such as breakpoints, stepping, ",(0,t.jsx)(n.a,{href:"https://blog.jetbrains.com/dotnet/2020/06/11/introducing-unity-pausepoints-for-rider/",children:"pausepoints"}),",\nbut also make edits to the code of your behaviours and ",(0,t.jsx)(n.a,{href:"https://hotreload.net/",children:"hot reload"})," them while Play Mode is still running."]}),"\n",(0,t.jsxs)(n.p,{children:["In addition, it also attempts to let you ",(0,t.jsx)(n.strong,{children:"test VR controls in-editor"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"When you are done iterating, release the killswitch, and build or upload your VRChat world as usual; but now that Udon is not really necessary in-editor,\nconsider giving VR standalone development a chance, so that you can create content without being limited by the VRChat platform."}),"\n",(0,t.jsx)(n.h2,{id:"discord",children:"Discord"}),"\n",(0,t.jsxs)(n.p,{children:["This project is experimental. Please discuss on ",(0,t.jsx)(n.a,{href:"/docs/other/discord",children:"Discord"})," in the ",(0,t.jsx)(n.code,{children:"#let-me-see"})," channel."]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,t.jsxs)(n.admonition,{type:"danger",children:[(0,t.jsxs)(n.p,{children:["You've been handed out this experimental project, there are risks associated with it: ",(0,t.jsx)(n.strong,{children:"prefab corruption"}),", loss of assigned fields in components, etc."]}),(0,t.jsx)(n.p,{children:"If you're trying this project, make backups, and use a separate project at first."})]}),"\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.em,{children:"Tools > Myrddin"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"killswitch",children:"Killswitch"}),"\n",(0,t.jsx)(n.p,{children:"The Killswitch button lets you suspend Udon systems, so that MonoBehaviour will execute instead."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"When it is OFF, no alterations are made to the project."}),"\n",(0,t.jsxs)(n.li,{children:["When it is ON, hooks will be enabled that will change the behaviour of Udon-related systems.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The UdonManager will be turned off, so that Udon programs will not execute."}),"\n",(0,t.jsxs)(n.li,{children:["We will plug our own component for handling ",(0,t.jsx)(n.em,{children:"PostLateUpdate()"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Some methods from UdonBehaviour components will be rerouted to their UdonSharpBehaviour equivalents."}),"\n",(0,t.jsx)(n.li,{children:"Some methods from UdonSharpBehaviour will be rerouted to spawn coroutines."}),"\n",(0,t.jsx)(n.li,{children:"Some methods within ClientSim systems will be rerouted to invoke equivalent functions in UdonSharpBehaviours."}),"\n",(0,t.jsx)(n.li,{children:"UdonSharp will be prevented from muting its own methods, so that MonoBehaviours will execute."}),"\n",(0,t.jsx)(n.li,{children:"UdonSharp will no longer prevent from entering Play Mode if there are U# compilation errors."}),"\n",(0,t.jsx)(n.li,{children:"UdonSharp will no longer reflect program variables from the UdonBehaviour back to the UdonSharpBehaviour."}),"\n",(0,t.jsx)(n.li,{children:"UdonSharp custom inspector will be suspended."}),"\n",(0,t.jsx)(n.li,{children:"Builds are disabled."}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"MYRDDIN_ACTIVE"})," scripting define will be made available."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"You cannot build your world while the killswitch in ON."})}),"\n",(0,t.jsx)(n.h3,{id:"clientsim-vr",children:"ClientSim VR"}),"\n",(0,t.jsx)(n.p,{children:"The ClientSim VR checkbox lets you enable a rudimentary VR mode."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"When it is OFF, no alterations are made to the project."}),"\n",(0,t.jsxs)(n.li,{children:["When it is ON, hooks will be enabled that will change the behaviour of ClientSim and VR systems.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"ClientSim will be injected a custom prefab that will handle VR controls."}),"\n",(0,t.jsx)(n.li,{children:"XR Plug-in management will initialize the VR system when entering Play Mode."}),"\n",(0,t.jsx)(n.li,{children:"OpenXR will be set as the active loader."}),"\n",(0,t.jsxs)(n.li,{children:["Calls to ",(0,t.jsx)(n.code,{children:'Input.GetAxis("...")'})," will execute custom code sourcing from the controller inputs."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"adaptations",children:"Adaptations"}),"\n",(0,t.jsxs)(n.h3,{id:"use-if-compiler_udonsharp-to-execute-non-udonsharp-code",children:["Use ",(0,t.jsx)(n.code,{children:"#if !COMPILER_UDONSHARP"})," to execute non-UdonSharp code"]}),"\n",(0,t.jsxs)(n.p,{children:["You can execute non-UdonSharp code, or code that should only execute when the Myrddin Killswitch is ON, by using ",(0,t.jsx)(n.code,{children:"#if !COMPILER_UDONSHARP"})]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"#if !COMPILER_UDONSHARP\n    // No optimization needed here, we're in C#.\n    var players = new VRCPlayerApi[VRCPlayerApi.GetPlayerCount()];\n    VRCPlayerApi.GetPlayers(players);\n    \n    // We have access to lambdas and other stuff unusable in UdonSharp.\n    var strings = players.Select(api => api.displayName).ToArray();\n    var joined = string.Join(',', strings);\n    Debug.Log($\"Player names: {joined}\");\n#endif\n"})}),"\n",(0,t.jsx)(n.p,{children:"Such code will not become part of the compiled Udon program."}),"\n",(0,t.jsx)(n.h3,{id:"onenable-and-awake-dont-execute-the-same-way",children:"OnEnable and Awake don't execute the same way"}),"\n",(0,t.jsxs)(n.p,{children:["There are some areas where methods such as ",(0,t.jsx)(n.code,{children:"OnEnable"})," and ",(0,t.jsx)(n.code,{children:"Awake"})," won't execute in the same order as in-editor Udon, or in-game."]}),"\n",(0,t.jsxs)(n.p,{children:["In the meantime, you may have to use ",(0,t.jsx)(n.code,{children:"#if !COMPILER_UDONSHARP"})," to insert ",(0,t.jsx)(n.em,{children:"Myrddin"}),"-specific fixes."]}),"\n",(0,t.jsx)(n.h3,{id:"vrcplayerapiuseattachedstation-needs-to-be-replaced",children:"VRCPlayerApi.UseAttachedStation() needs to be replaced"}),"\n",(0,t.jsxs)(n.p,{children:["For complicated reasons, ",(0,t.jsx)(n.code,{children:"VRCPlayerApi.UseAttachedStation()"})," needs to be replaced."]}),"\n",(0,t.jsx)(n.p,{children:"Replace:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"#if COMPILER_UDONSHARP\n    Networking.LocalPlayer.UseAttachedStation();\n"})}),"\n",(0,t.jsx)(n.p,{children:"with the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"#if COMPILER_UDONSHARP\n    Networking.LocalPlayer.UseAttachedStation();\n#elif MYRDDIN_ACTIVE\n    Hai.Myrddin.Core.Runtime.MyrddinHelpers.UseStation(this);\n#endif\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The reason is that ",(0,t.jsx)(n.code,{children:"VRCPlayerApi.UseAttachedStation()"})," is a weird function originally made for Udon Graphs, which once invoked\nneeds to know where it was called from."]}),"\n",(0,t.jsxs)(n.p,{children:["Getting the caller instance of a function is ",(0,t.jsx)(n.em,{children:"really"})," hard to do using native code (stack traces only provide the calling type and method,\nnot instance). AFAIK The other ways to solve this are very invasive for little benefit, so it is not done. Please just use this snippet."]}),"\n",(0,t.jsxs)(n.p,{children:["We use ",(0,t.jsx)(n.code,{children:"#elif MYRDDIN_ACTIVE"})," instead of just using ",(0,t.jsx)(n.code,{children:"#else"})," so that this doesn't fail to compile for users who don't have ",(0,t.jsx)(n.em,{children:"Myrddin"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);